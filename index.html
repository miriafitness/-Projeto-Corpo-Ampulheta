<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ğŸ‘ Projeto Ampulheta</title>
  <meta name="theme-color" content="#ff2d83" />

  <!-- Fonte -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

  <!-- Chart.js (grÃ¡ficos) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

  <style>
    :root{
      --bg:#fff2f6;
      --card:#ffffff;
      --pink:#ff2d83;
      --pink2:#ff5aa5;
      --text:#1c1c1c;
      --muted:#6b6b6b;
      --line:#f0d5df;
      --ok:#17a34a;
      --warn:#f59e0b;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;
      background: radial-gradient(1200px 400px at 50% 0%, #ffe1ec, var(--bg));
      color:var(--text);
    }
    .wrap{max-width:980px;margin:0 auto;padding:18px}
    header{
      display:flex; align-items:center; justify-content:space-between;
      gap:12px; margin:8px 0 14px;
    }
    .brand{
      display:flex; flex-direction:column; gap:2px;
    }
    .brand h1{margin:0;font-size:28px;letter-spacing:-.5px}
    .brand p{margin:0;color:var(--muted);font-size:13px}
    .pill{
      display:inline-flex;align-items:center;gap:8px;
      padding:10px 12px;border-radius:999px;background:#fff; border:1px solid var(--line);
      font-size:13px;color:var(--muted);
    }
    .grid{
      display:grid; grid-template-columns: repeat(12, 1fr);
      gap:14px;
    }
    .card{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:18px;
      box-shadow: 0 10px 30px rgba(0,0,0,.06);
      overflow:hidden;
    }
    .card .hd{
      padding:14px 14px 10px;
      display:flex; align-items:flex-start; justify-content:space-between; gap:10px;
      border-bottom:1px solid #f6e6ee;
    }
    .card .hd h2{margin:0;font-size:16px}
    .card .hd small{color:var(--muted)}
    .card .bd{padding:14px}
    .btnrow{display:flex;flex-wrap:wrap;gap:10px}
    button, .btn{
      border:0; cursor:pointer;
      padding:11px 12px; border-radius:12px;
      background:var(--pink);
      color:#fff; font-weight:700;
      transition:.15s transform;
      font-family:inherit;
    }
    button:active{transform:scale(.98)}
    .btn-ghost{
      background:#fff; color:var(--pink);
      border:1px solid var(--line);
      font-weight:700;
    }
    .btn-warn{
      background:#fff7ed; color:#9a3412;
      border:1px solid #fed7aa;
      font-weight:800;
    }
    .tabs{
      display:flex; flex-wrap:wrap; gap:10px;
      margin:10px 0 0;
    }
    .tab{
      background:#fff;
      border:1px solid var(--line);
      color:var(--text);
      padding:10px 12px;
      border-radius:999px;
      font-weight:800;
      cursor:pointer;
    }
    .tab.active{
      background: linear-gradient(135deg, var(--pink), var(--pink2));
      color:#fff;
      border-color:transparent;
    }
    .two{
      display:grid; grid-template-columns: 1fr 1fr; gap:12px;
    }
    @media (max-width: 820px){
      .two{grid-template-columns:1fr}
      header{flex-direction:column;align-items:flex-start}
    }
    .kpi{
      display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:8px;
    }
    .kpi .box{
      background:#fff; border:1px solid var(--line);
      border-radius:14px; padding:10px;
    }
    .kpi .box b{display:block;font-size:16px}
    .kpi .box span{color:var(--muted);font-size:12px}
    .list{
      display:flex; flex-direction:column; gap:10px;
    }
    .item{
      border:1px solid var(--line);
      border-radius:14px;
      padding:12px;
      background:#fff;
    }
    .item .top{
      display:flex;align-items:center;justify-content:space-between;gap:10px;
    }
    .item .top b{font-size:14px}
    .item .meta{color:var(--muted);font-size:12px;margin-top:4px}
    .item a{color:var(--pink);font-weight:800;text-decoration:none}
    .row{
      display:grid;grid-template-columns:1fr 130px 130px;gap:10px;margin-top:10px;
    }
    @media (max-width:560px){
      .row{grid-template-columns:1fr 1fr; }
      .row .full{grid-column:1/-1}
    }
    input, select, textarea{
      width:100%;
      padding:10px 11px;
      border-radius:12px;
      border:1px solid var(--line);
      font-family:inherit;
      outline:none;
      background:#fff;
    }
    textarea{min-height:92px; resize:vertical}
    .hint{color:var(--muted);font-size:12px;margin-top:6px}
    .badge{
      display:inline-flex;align-items:center;gap:6px;
      font-size:12px;
      padding:6px 10px;border-radius:999px;
      background:#fff; border:1px solid var(--line);
      color:var(--muted);
    }
    .ok{color:var(--ok);font-weight:800}
    .small{font-size:12px;color:var(--muted)}
    .hr{height:1px;background:#f6e6ee;margin:12px 0}
    .footer{margin:18px 0 6px;color:var(--muted);font-size:12px}
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <h1>ğŸ‘ Projeto Ampulheta</h1>
        <p>Treino + cargas + medidas + dieta econÃ´mica (salva automaticamente no navegador)</p>
      </div>
      <div class="pill" id="statusPill">ğŸ“Œ Pronta pra evoluir hoje, MiriÃ£ ğŸ’›</div>
    </header>

    <!-- Atalhos -->
    <div class="grid">
      <div class="card" style="grid-column: span 12;">
        <div class="hd">
          <div>
            <h2>ğŸ“… Menu rÃ¡pido</h2>
            <small>Clique e role atÃ© a seÃ§Ã£o</small>
          </div>
          <div class="badge">âœ¨ v2 painel + grÃ¡ficos + backup</div>
        </div>
        <div class="bd btnrow">
          <button class="btn" onclick="go('treinos')">ğŸ“Œ Treinos (4x)</button>
          <button class="btn" onclick="go('registrar')">ğŸ§¾ Registrar carga</button>
          <button class="btn" onclick="go('medidas')">ğŸ“ Medidas + check-in</button>
          <button class="btn" onclick="go('graficos')">ğŸ“Š GrÃ¡ficos</button>
          <button class="btn" onclick="go('dieta')">ğŸ¥— Dieta econÃ´mica</button>
          <button class="btn-ghost" onclick="go('backup')">ğŸ›¡ï¸ Backup</button>
        </div>
      </div>

      <!-- KPIs -->
      <div class="card" style="grid-column: span 12;">
        <div class="hd">
          <div>
            <h2>ğŸ“Œ Seu painel</h2>
            <small>Resumo rÃ¡pido pra manter o foco</small>
          </div>
          <div class="badge">Objetivo: glÃºteo ğŸ‘ + cintura bem marcada â³</div>
        </div>
        <div class="bd">
          <div class="kpi">
            <div class="box">
              <b id="kpiPeso">â€”</b>
              <span>Peso atual</span>
            </div>
            <div class="box">
              <b id="kpiCintura">â€”</b>
              <span>Cintura</span>
            </div>
            <div class="box">
              <b id="kpiGluteo">â€”</b>
              <span>GlÃºteo</span>
            </div>
          </div>
          <p class="hint">Dica ampulheta: mantenha costas/postura + core 2x/semana e glÃºteo 2x/semana com progressÃ£o.</p>
        </div>
      </div>

      <!-- Treinos -->
      <div class="card" id="treinos" style="grid-column: span 12;">
        <div class="hd">
          <div>
            <h2>ğŸ‹ï¸ Treinos (4x semana)</h2>
            <small>Descanso: <b>Principais 1m30</b> â€¢ AcessÃ³rios 45sâ€“1m</small>
          </div>
          <div class="badge">âœ… foco glÃºteo + postura + cintura</div>
        </div>
        <div class="bd">
          <div class="tabs" id="tabs">
            <div class="tab active" data-tab="seg">Segunda â€¢ GlÃºteo Pesado</div>
            <div class="tab" data-tab="ter">TerÃ§a â€¢ Costas + Cintura</div>
            <div class="tab" data-tab="qui">Quinta â€¢ Posterior + GlÃºteo</div>
            <div class="tab" data-tab="sex">Sexta â€¢ GlÃºteo + Postura</div>
          </div>

          <div class="hr"></div>

          <div id="tab-seg" class="tabpage">
            <h3>Segunda â€” GlÃºteo Pesado ğŸ‘</h3>
            <div class="list" id="list-seg"></div>
          </div>

          <div id="tab-ter" class="tabpage" style="display:none">
            <h3>TerÃ§a â€” Costas + Cintura (Postura + Core) â³</h3>
            <p class="small">Cintura â€œBâ€ vem muito de: postura, dorsais (costas), ombros e core profundo (transverso). Barriga chapada = dÃ©ficit leve + proteÃ­na + intestino funcionando.</p>
            <div class="list" id="list-ter"></div>
          </div>

          <div id="tab-qui" class="tabpage" style="display:none">
            <h3>Quinta â€” Posterior + GlÃºteo ğŸ‘</h3>
            <div class="list" id="list-qui"></div>
          </div>

          <div id="tab-sex" class="tabpage" style="display:none">
            <h3>Sexta â€” GlÃºteo + Postura ğŸ”¥</h3>
            <div class="list" id="list-sex"></div>
          </div>

          <p class="footer">*Se ficar com dor forte (DOMS) como vocÃª sentiu: reduza 1 sÃ©rie dos principais na semana seguinte e aumente de novo quando recuperar. Dor â‰  treino bom, evoluÃ§Ã£o constante = treino certo.</p>
        </div>
      </div>

      <!-- Registrar cargas -->
      <div class="card" id="registrar" style="grid-column: span 12;">
        <div class="hd">
          <div>
            <h2>ğŸ§¾ Registrar carga (histÃ³rico por exercÃ­cio)</h2>
            <small>Salva automÃ¡tico â€¢ Use isso pra crescer glÃºteo mais rÃ¡pido (progressÃ£o)</small>
          </div>
          <div class="badge">ğŸ“ˆ regra: bateu reps com boa forma â†’ sobe peso</div>
        </div>

        <div class="bd">
          <div class="two">
            <div>
              <label><b>ExercÃ­cio</b></label>
              <select id="exSelect"></select>
              <div class="hint">Escolha o exercÃ­cio e registre seu melhor set do dia.</div>
            </div>
            <div>
              <label><b>Data</b></label>
              <input id="exDate" type="date" />
              <div class="hint">Deixe hoje ou ajuste.</div>
            </div>
          </div>

          <div class="row">
            <div class="full">
              <label><b>ObservaÃ§Ã£o (opcional)</b></label>
              <input id="exObs" placeholder="Ex.: doeu um pouco, mas formei bem / senti mais glÃºteo" />
            </div>
            <div>
              <label><b>Carga (kg)</b></label>
              <input id="exKg" type="number" step="0.5" placeholder="Ex.: 18" />
            </div>
            <div>
              <label><b>Reps</b></label>
              <input id="exReps" type="number" step="1" placeholder="Ex.: 12" />
            </div>
          </div>

          <div class="btnrow" style="margin-top:12px">
            <button onclick="saveSet()">Salvar registro</button>
            <button class="btn-ghost" onclick="clearForm()">Limpar</button>
          </div>

          <div class="hr"></div>
          <h3>ğŸ“š HistÃ³rico do exercÃ­cio</h3>
          <div id="historyBox" class="list"></div>
        </div>
      </div>

      <!-- Medidas -->
      <div class="card" id="medidas" style="grid-column: span 12;">
        <div class="hd">
          <div>
            <h2>ğŸ“ Medidas + Check-in</h2>
            <small>Registre 1x por semana (ex.: domingo de manhÃ£)</small>
          </div>
          <div class="badge">ğŸ¯ vocÃª: cintura 72 â€¢ abdÃ´men 81 â€¢ glÃºteo 96</div>
        </div>
        <div class="bd">
          <div class="row">
            <div class="full">
              <label><b>Data</b></label>
              <input id="mDate" type="date"/>
            </div>
            <div>
              <label><b>Peso (kg)</b></label>
              <input id="mPeso" type="number" step="0.1" placeholder="Ex.: 56.9"/>
            </div>
            <div>
              <label><b>Cintura (cm)</b></label>
              <input id="mCintura" type="number" step="0.1" placeholder="Ex.: 72"/>
            </div>
            <div>
              <label><b>AbdÃ´men (cm)</b></label>
              <input id="mAbdomen" type="number" step="0.1" placeholder="Ex.: 81"/>
            </div>
            <div>
              <label><b>GlÃºteo (cm)</b></label>
              <input id="mGluteo" type="number" step="0.1" placeholder="Ex.: 96"/>
            </div>
          </div>

          <div class="btnrow" style="margin-top:12px">
            <button onclick="saveMeasures()">Salvar medidas</button>
            <button class="btn-ghost" onclick="renderMeasures()">Atualizar painel</button>
          </div>

          <div class="hr"></div>
          <h3>ğŸ“Œ Ãšltimos check-ins</h3>
          <div id="measuresBox" class="list"></div>
        </div>
      </div>

      <!-- GrÃ¡ficos -->
      <div class="card" id="graficos" style="grid-column: span 12;">
        <div class="hd">
          <div>
            <h2>ğŸ“Š GrÃ¡ficos de evoluÃ§Ã£o</h2>
            <small>Escolha um exercÃ­cio e veja a evoluÃ§Ã£o do peso + reps</small>
          </div>
          <div class="badge">ğŸ’¡ consistÃªncia = cintura desenha + glÃºteo cresce</div>
        </div>
        <div class="bd">
          <div class="two">
            <div>
              <label><b>GrÃ¡fico de exercÃ­cio</b></label>
              <select id="chartSelect"></select>
              <div class="hint">Recomendo acompanhar: Hip Thrust / Leg Press / Smith</div>
            </div>
            <div>
              <label><b>GrÃ¡fico de medidas</b></label>
              <select id="measureChartSelect">
                <option value="peso">Peso</option>
                <option value="cintura">Cintura</option>
                <option value="abdomen">AbdÃ´men</option>
                <option value="gluteo">GlÃºteo</option>
              </select>
              <div class="hint">1x por semana jÃ¡ muda tudo.</div>
            </div>
          </div>

          <div class="hr"></div>

          <div class="two">
            <div class="card" style="box-shadow:none">
              <div class="bd">
                <b>ğŸ“ˆ ExercÃ­cio</b>
                <canvas id="chartExercise" height="170"></canvas>
              </div>
            </div>

            <div class="card" style="box-shadow:none">
              <div class="bd">
                <b>ğŸ“ Medidas</b>
                <canvas id="chartMeasures" height="170"></canvas>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Dieta -->
      <div class="card" id="dieta" style="grid-column: span 12;">
        <div class="hd">
          <div>
            <h2>ğŸ¥— Dieta econÃ´mica (sem tapioca)</h2>
            <small>Com foco em barriga menos inchada + intestino funcionando + manter massa</small>
          </div>
          <div class="badge">ğŸš½ foco: fibra + Ã¡gua + rotina</div>
        </div>
        <div class="bd">
          <div class="two">
            <div class="item">
              <b>Regras simples (funciona de verdade)</b>
              <div class="meta">
                â€¢ ProteÃ­na em TODA refeiÃ§Ã£o (ovos/frango/atum/iogurte).<br>
                â€¢ Fruta SEMPRE sem coar (quando der) â†’ a fibra ajuda o intestino.<br>
                â€¢ 1 colher de sopa de chia OU linhaÃ§a por dia.<br>
                â€¢ Legumes/salada em metade do prato no almoÃ§o/jantar.<br>
                â€¢ 1â€“2 cafÃ©s ok, mas Ã¡gua continua sendo base.
              </div>
            </div>
            <div class="item">
              <b>Para intestino preso (semanal)</b>
              <div class="meta">
                â€¢ 2 kiwis/dia OU 4â€“6 ameixas secas/dia (testa 3 dias).<br>
                â€¢ Iogurte natural + aveia + mamÃ£o (Ã³timo).<br>
                â€¢ Caminhar 10 min depois do almoÃ§o ajuda MUITO.<br>
                â€¢ Se ficar 3+ dias sem ir ao banheiro com dor: procure mÃ©dico.
              </div>
            </div>
          </div>

          <div class="hr"></div>

          <h3>ğŸ½ï¸ Modelo de dia (barato e prÃ¡tico)</h3>
          <div class="list">
            <div class="item">
              <b>06:50 â€“ CafÃ©</b>
              <div class="meta">
                2 ovos mexidos + 1 fatia pÃ£o 12 grÃ£os + 1 fruta (se tiver) <br>
                Suco: melhor SEM coar (quando possÃ­vel). Se coar, coma a fibra em outro momento (mamÃ£o/aveia).
              </div>
            </div>
            <div class="item">
              <b>09:40 â€“ Lanche</b>
              <div class="meta">
                MamÃ£o + aveia (perfeito) OU iogurte natural + banana + aveia OU 2 ameixas + fruta.
              </div>
            </div>
            <div class="item">
              <b>11:30 â€“ AlmoÃ§o</b>
              <div class="meta">
                3 colheres arroz + 3 feijÃ£o + salada bastante + frango/carne. <br>
                Dica barriga: come a salada primeiro + mastiga devagar.
              </div>
            </div>
            <div class="item">
              <b>14:40 â€“ Lanche</b>
              <div class="meta">
                Fruta + castanhas (se couber) OU iogurte OU sanduÃ­che simples de frango desfiado.
              </div>
            </div>
            <div class="item">
              <b>20:30 â€“ Jantar</b>
              <div class="meta">
                Salada + 150g frango desfiado (Ã³timo). Se sentir fome: coloca 1 batata/mandioca pequena OU legumes cozidos.
              </div>
            </div>
          </div>

          <div class="hr"></div>
          <h3>ğŸ›’ Lista de compras (econÃ´mica)</h3>
          <div class="two">
            <div class="item">
              <b>ProteÃ­nas</b>
              <div class="meta">
                â€¢ Ovos <br>â€¢ Frango (peito/sobrecoxa) <br>â€¢ Atum/sardinha (lata) <br>â€¢ Iogurte natural
              </div>
            </div>
            <div class="item">
              <b>Carboidratos â€œdo bemâ€</b>
              <div class="meta">
                â€¢ Arroz â€¢ FeijÃ£o â€¢ Aveia <br>
                â€¢ Batata/mandioca (opcional) <br>
                â€¢ PÃ£o 12 grÃ£os (o seu)
              </div>
            </div>
            <div class="item">
              <b>Fibras p/ intestino</b>
              <div class="meta">
                â€¢ MamÃ£o â€¢ Banana â€¢ MaÃ§Ã£ <br>
                â€¢ Ameixa seca â€¢ Kiwi (quando der) <br>
                â€¢ Chia ou linhaÃ§a
              </div>
            </div>
            <div class="item">
              <b>Verduras/legumes</b>
              <div class="meta">
                â€¢ Alface/ rÃºcula â€¢ Tomate â€¢ Pepino <br>
                â€¢ Cenoura â€¢ Abobrinha â€¢ BrÃ³colis (congelado Ã© ok) <br>
                â€¢ Couve (se vocÃª gosta)
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Backup -->
      <div class="card" id="backup" style="grid-column: span 12;">
        <div class="hd">
          <div>
            <h2>ğŸ›¡ï¸ Backup (pra nÃ£o perder seus dados)</h2>
            <small>Exporta tudo (cargas + medidas) em 1 arquivo</small>
          </div>
          <div class="badge">âœ… recomendado 1x por mÃªs</div>
        </div>
        <div class="bd">
          <div class="btnrow">
            <button class="btn" onclick="exportData()">â¬‡ï¸ Exportar backup</button>
            <label class="btn-ghost btn" style="cursor:pointer">
              â¬†ï¸ Importar backup
              <input id="importFile" type="file" accept="application/json" style="display:none" onchange="importData(event)" />
            </label>
            <button class="btn-warn" onclick="resetAll()">âš ï¸ Zerar tudo</button>
          </div>
          <p class="hint">Backup Ã© um arquivo .json. Guarde no Drive/WhatsApp com vocÃª mesma.</p>
        </div>
      </div>

    </div>
  </div>

<script>
  // -----------------------------
  // DADOS (treinos + vÃ­deos PT)
  // -----------------------------
  const EXERCISES = {
    seg: [
      { name:"Hip Thrust (mÃ¡quina)", sets:"4Ã—8â€“10", tips:"Queixo para baixo â€¢ Calcanhar firme â€¢ Segura 1s no topo â€¢ Sem arquear lombar",
        video:"https://www.youtube.com/results?search_query=hip+thrust+execu%C3%A7%C3%A3o+certa+academia+portugu%C3%AAs"
      },
      { name:"Leg Press 45Â°", sets:"4Ã—10â€“12", tips:"PÃ© mais alto â€¢ NÃ£o travar joelho â€¢ Descer controlando",
        video:"https://www.youtube.com/results?search_query=leg+press+45+execu%C3%A7%C3%A3o+certa+portugu%C3%AAs"
      },
      { name:"Cadeira Abdutora", sets:"3Ã—15", tips:"Inclina levemente para frente â€¢ Segura 1s aberta",
        video:"https://www.youtube.com/results?search_query=cadeira+abdutora+execu%C3%A7%C3%A3o+certa+portugu%C3%AAs"
      },
      { name:"Stiff com halter", sets:"3Ã—10", tips:"Coluna neutra â€¢ Descer devagar â€¢ Sente alongar posterior",
        video:"https://www.youtube.com/results?search_query=stiff+com+halter+execu%C3%A7%C3%A3o+certa+portugu%C3%AAs"
      },
      { name:"Cardio inclinado", sets:"15â€“20 min", tips:"Esteira inclinada leve/moderada (conversa curta)",
        video:"https://www.youtube.com/results?search_query=esteira+inclinada+para+emagrecer+portugu%C3%AAs"
      },
    ],
    ter: [
      { name:"Puxada frente (polia/mÃ¡quina)", sets:"3Ã—12", tips:"Peito aberto â€¢ Puxa com o cotovelo â€¢ NÃ£o encolher ombros",
        video:"https://www.youtube.com/results?search_query=puxada+frente+polia+execu%C3%A7%C3%A3o+certa+portugu%C3%AAs"
      },
      { name:"Remada baixa (mÃ¡quina)", sets:"3Ã—12", tips:"Segura 1s atrÃ¡s â€¢ Cotovelos para trÃ¡s â€¢ Postura firme",
        video:"https://www.youtube.com/results?search_query=remada+baixa+maquina+execu%C3%A7%C3%A3o+certa+portugu%C3%AAs"
      },
      { name:"ElevaÃ§Ã£o lateral (halter)", sets:"3Ã—12", tips:"BraÃ§o semi-flexionado â€¢ Sobe atÃ© linha do ombro",
        video:"https://www.youtube.com/results?search_query=eleva%C3%A7%C3%A3o+lateral+halter+execu%C3%A7%C3%A3o+certa+portugu%C3%AAs"
      },
      { name:"Pallof Press (anti-rotaÃ§Ã£o)", sets:"3Ã—12 cada lado", tips:"Core travado â€¢ NÃ£o girar tronco â€¢ Controla",
        video:"https://www.youtube.com/results?search_query=pallof+press+execu%C3%A7%C3%A3o+portugu%C3%AAs"
      },
      { name:"Prancha", sets:"3Ã—30â€“45s", tips:"Barriga pra dentro â€¢ GlÃºteo firme â€¢ Sem cair lombar",
        video:"https://www.youtube.com/results?search_query=prancha+execu%C3%A7%C3%A3o+certa+portugu%C3%AAs"
      },
    ],
    qui: [
      { name:"Mesa/Cadeira flexora", sets:"4Ã—12â€“15", tips:"Desce controlando â€¢ Sente posterior â€¢ NÃ£o tirar quadril do banco",
        video:"https://www.youtube.com/results?search_query=cadeira+flexora+mesa+flexora+execu%C3%A7%C3%A3o+portugu%C3%AAs"
      },
      { name:"Afundo andando (halter)", sets:"3Ã—10 cada perna", tips:"Passo mÃ©dio â€¢ Tronco levemente Ã  frente â€¢ Joelho acompanha pÃ©",
        video:"https://www.youtube.com/results?search_query=afundo+andando+halter+execu%C3%A7%C3%A3o+certa+portugu%C3%AAs"
      },
      { name:"Coice no cabo (glÃºteo na polia)", sets:"3Ã—12 cada perna", tips:"Quadril estÃ¡vel â€¢ Sobe e segura 1s â€¢ NÃ£o arquear lombar",
        video:"https://www.youtube.com/results?search_query=coice+no+cabo+gluteo+polia+execu%C3%A7%C3%A3o+portugu%C3%AAs"
      },
      { name:"Cadeira abdutora", sets:"3Ã—15", tips:"Inclina levemente Ã  frente â€¢ Segura 1s aberta",
        video:"https://www.youtube.com/results?search_query=cadeira+abdutora+execu%C3%A7%C3%A3o+certa+portugu%C3%AAs"
      },
      { name:"Cardio leve", sets:"10â€“15 min", tips:"Bike/esteira leve para recuperar",
        video:"https://www.youtube.com/results?search_query=cardio+leve+p%C3%B3s+treino+portugu%C3%AAs"
      },
    ],
    sex: [
      { name:"Agachamento no Smith", sets:"4Ã—8â€“10", tips:"PÃ© um pouco Ã  frente â€¢ Desce controlando â€¢ Sobe empurrando pelo calcanhar",
        video:"https://www.youtube.com/results?search_query=agachamento+no+smith+execu%C3%A7%C3%A3o+certa+portugu%C3%AAs"
      },
      { name:"Cadeira extensora", sets:"3Ã—12", tips:"Sobe forte â€¢ Desce controlando â€¢ NÃ£o chutar",
        video:"https://www.youtube.com/results?search_query=cadeira+extensora+execu%C3%A7%C3%A3o+certa+portugu%C3%AAs"
      },
      { name:"Hip Thrust (leve â€“ contraÃ§Ã£o)", sets:"3Ã—12", tips:"Pausa de 2s no topo â€¢ Sente glÃºteo queimar",
        video:"https://www.youtube.com/results?search_query=hip+thrust+contra%C3%A7%C3%A3o+no+topo+portugu%C3%AAs"
      },
      { name:"Face Pull (postura)", sets:"3Ã—12â€“15", tips:"Cotovelos altos â€¢ Puxa para o rosto â€¢ EscÃ¡pulas juntas",
        video:"https://www.youtube.com/results?search_query=face+pull+execu%C3%A7%C3%A3o+certa+portugu%C3%AAs"
      },
      { name:"Abdominal infra (banco)", sets:"3Ã—12â€“15", tips:"Movimento curto â€¢ Lombar colada â€¢ Sem embalo",
        video:"https://www.youtube.com/results?search_query=abdominal+infra+no+banco+execu%C3%A7%C3%A3o+portugu%C3%AAs"
      },
    ],
  };

  // -----------------------------
  // STORAGE
  // -----------------------------
  const LS = {
    sets: "ampulheta_sets_v2",
    measures:"ampulheta_measures_v2"
  };

  function load(key, fallback){
    try{
      const raw = localStorage.getItem(key);
      if(!raw) return fallback;
      return JSON.parse(raw);
    }catch(e){ return fallback; }
  }
  function save(key, value){
    localStorage.setItem(key, JSON.stringify(value));
  }

  // -----------------------------
  // RENDER TREINOS
  // -----------------------------
  function renderWorkout(dayKey, elId){
    const box = document.getElementById(elId);
    box.innerHTML = "";
    EXERCISES[dayKey].forEach(ex => {
      const div = document.createElement("div");
      div.className = "item";
      div.innerHTML = `
        <div class="top">
          <b>${ex.name}</b>
          <span class="badge">${ex.sets}</span>
        </div>
        <div class="meta">${ex.tips}</div>
        <div class="meta"><a href="${ex.video}" target="_blank" rel="noreferrer">â–¶ Ver vÃ­deo (PT)</a></div>
      `;
      box.appendChild(div);
    });
  }

  // -----------------------------
  // SELECTS + HISTÃ“RICO
  // -----------------------------
  function allExerciseNames(){
    const names = [];
    Object.values(EXERCISES).forEach(list => list.forEach(x => names.push(x.name)));
    return [...new Set(names)];
  }

  function fillExerciseSelects(){
    const names = allExerciseNames();
    const exSelect = document.getElementById("exSelect");
    const chartSelect = document.getElementById("chartSelect");

    exSelect.innerHTML = "";
    chartSelect.innerHTML = "";

    names.forEach(n=>{
      const o1 = document.createElement("option"); o1.value=n; o1.textContent=n;
      const o2 = document.createElement("option"); o2.value=n; o2.textContent=n;
      exSelect.appendChild(o1);
      chartSelect.appendChild(o2);
    });

    exSelect.addEventListener("change", renderHistory);
    chartSelect.addEventListener("change", renderExerciseChart);
  }

  function todayISO(){
    const d = new Date();
    const tz = new Date(d.getTime() - d.getTimezoneOffset()*60000);
    return tz.toISOString().slice(0,10);
  }

  function clearForm(){
    document.getElementById("exObs").value="";
    document.getElementById("exKg").value="";
    document.getElementById("exReps").value="";
    document.getElementById("exDate").value=todayISO();
  }

  function saveSet(){
    const name = document.getElementById("exSelect").value;
    const date = document.getElementById("exDate").value || todayISO();
    const kg = Number(document.getElementById("exKg").value || 0);
    const reps = Number(document.getElementById("exReps").value || 0);
    const obs = document.getElementById("exObs").value.trim();

    if(!name || !kg || !reps){
      alert("Preencha exercÃ­cio, carga e reps ğŸ™‚");
      return;
    }

    const data = load(LS.sets, []);
    data.push({name,date,kg,reps,obs, createdAt: Date.now()});
    data.sort((a,b)=> (a.date>b.date?1:-1));
    save(LS.sets, data);

    clearForm();
    renderHistory();
    renderExerciseChart();
    setStatus("âœ… Registro salvo! Boa, MiriÃ£ ğŸ’›");
  }

  function renderHistory(){
    const name = document.getElementById("exSelect").value;
    const box = document.getElementById("historyBox");
    const data = load(LS.sets, []).filter(x=>x.name===name).slice().reverse();

    if(data.length===0){
      box.innerHTML = `<div class="item">Sem registros ainda para <b>${name}</b>. Registra hoje e comeÃ§a sua evoluÃ§Ã£o ğŸ‘‡</div>`;
      return;
    }

    box.innerHTML = "";
    data.slice(0,12).forEach(x=>{
      const div = document.createElement("div");
      div.className="item";
      div.innerHTML = `
        <div class="top">
          <b>${x.date} â€¢ ${x.kg} kg Ã— ${x.reps}</b>
          <span class="badge">${x.obs ? "ğŸ“" : "ğŸ“Œ"}</span>
        </div>
        ${x.obs ? `<div class="meta">${x.obs}</div>` : `<div class="meta">â€”</div>`}
      `;
      box.appendChild(div);
    });
  }

  // -----------------------------
  // MEDIDAS
  // -----------------------------
  function saveMeasures(){
    const date = document.getElementById("mDate").value || todayISO();
    const peso = Number(document.getElementById("mPeso").value || 0);
    const cintura = Number(document.getElementById("mCintura").value || 0);
    const abdomen = Number(document.getElementById("mAbdomen").value || 0);
    const gluteo = Number(document.getElementById("mGluteo").value || 0);

    if(!peso || !cintura || !abdomen || !gluteo){
      alert("Preencha peso + cintura + abdÃ´men + glÃºteo ğŸ™‚");
      return;
    }

    const data = load(LS.measures, []);
    data.push({date,peso,cintura,abdomen,gluteo, createdAt: Date.now()});
    data.sort((a,b)=> (a.date>b.date?1:-1));
    save(LS.measures, data);

    renderMeasures();
    renderMeasuresChart();
    setStatus("âœ… Medidas salvas! Seu painel atualizou ğŸ’›");
  }

  function renderMeasures(){
    const box = document.getElementById("measuresBox");
    const data = load(LS.measures, []).slice().reverse();

    if(data.length===0){
      box.innerHTML = `<div class="item">Ainda nÃ£o tem check-in. Coloca sua medida atual e salva ğŸ™‚</div>`;
      // painel com valores base que vocÃª me deu
      document.getElementById("kpiPeso").textContent = "56,9 kg";
      document.getElementById("kpiCintura").textContent = "72 cm";
      document.getElementById("kpiGluteo").textContent = "96 cm";
      return;
    }

    box.innerHTML = "";
    data.slice(0,8).forEach(x=>{
      const div = document.createElement("div");
      div.className="item";
      div.innerHTML = `
        <div class="top">
          <b>${x.date}</b>
          <span class="badge">${x.peso} kg</span>
        </div>
        <div class="meta">Cintura: <b>${x.cintura}</b> â€¢ AbdÃ´men: <b>${x.abdomen}</b> â€¢ GlÃºteo: <b>${x.gluteo}</b></div>
      `;
      box.appendChild(div);
    });

    const last = data[0];
    document.getElementById("kpiPeso").textContent = `${last.peso} kg`;
    document.getElementById("kpiCintura").textContent = `${last.cintura} cm`;
    document.getElementById("kpiGluteo").textContent = `${last.gluteo} cm`;
  }

  // -----------------------------
  // GRÃFICOS
  // -----------------------------
  let chartEx=null, chartMe=null;

  function renderExerciseChart(){
    const name = document.getElementById("chartSelect").value;
    const data = load(LS.sets, []).filter(x=>x.name===name).slice();

    const labels = data.map(x=>x.date);
    const kg = data.map(x=>x.kg);
    const reps = data.map(x=>x.reps);

    const ctx = document.getElementById("chartExercise").getContext("2d");
    if(chartEx) chartEx.destroy();

    chartEx = new Chart(ctx, {
      type:"line",
      data:{
        labels,
        datasets:[
          { label:"Carga (kg)", data:kg, tension:.35 },
          { label:"Reps", data:reps, tension:.35 }
        ]
      },
      options:{
        responsive:true,
        plugins:{ legend:{ position:"bottom" } },
        scales:{ y:{ beginAtZero:true } }
      }
    });
  }

  function renderMeasuresChart(){
    const mode = document.getElementById("measureChartSelect").value;
    const data = load(LS.measures, []).slice();

    const labels = data.map(x=>x.date);
    const series = data.map(x=>x[mode]);

    const ctx = document.getElementById("chartMeasures").getContext("2d");
    if(chartMe) chartMe.destroy();

    chartMe = new Chart(ctx, {
      type:"line",
      data:{
        labels,
        datasets:[
          { label: modeLabel(mode), data: series, tension:.35 }
        ]
      },
      options:{
        responsive:true,
        plugins:{ legend:{ position:"bottom" } },
        scales:{ y:{ beginAtZero:false } }
      }
    });
  }

  function modeLabel(m){
    if(m==="peso") return "Peso (kg)";
    if(m==="cintura") return "Cintura (cm)";
    if(m==="abdomen") return "AbdÃ´men (cm)";
    return "GlÃºteo (cm)";
  }

  // -----------------------------
  // BACKUP
  // -----------------------------
  function exportData(){
    const payload = {
      exportedAt: new Date().toISOString(),
      sets: load(LS.sets, []),
      measures: load(LS.measures, [])
    };
    const blob = new Blob([JSON.stringify(payload,null,2)], {type:"application/json"});
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "backup-projeto-ampulheta.json";
    a.click();
    setStatus("â¬‡ï¸ Backup baixado! Guarda com carinho ğŸ’›");
  }

  function importData(event){
    const file = event.target.files?.[0];
    if(!file) return;
    const reader = new FileReader();
    reader.onload = () => {
      try{
        const payload = JSON.parse(reader.result);
        if(payload.sets) save(LS.sets, payload.sets);
        if(payload.measures) save(LS.measures, payload.measures);
        renderAll();
        setStatus("â¬†ï¸ Backup importado! TÃ¡ tudo aqui de novo ğŸ’›");
      }catch(e){
        alert("Arquivo invÃ¡lido ğŸ˜•");
      }
    };
    reader.readAsText(file);
  }

  function resetAll(){
    if(!confirm("Tem certeza que quer apagar TUDO?")){
      return;
    }
    localStorage.removeItem(LS.sets);
    localStorage.removeItem(LS.measures);
    renderAll();
    setStatus("âš ï¸ Tudo zerado. Quando quiser, recomeÃ§a ğŸ’›");
  }

  // -----------------------------
  // UI helpers
  // -----------------------------
  function go(id){
    document.getElementById(id).scrollIntoView({behavior:"smooth", block:"start"});
  }
  function setStatus(txt){
    document.getElementById("statusPill").textContent = txt;
    setTimeout(()=>{ document.getElementById("statusPill").textContent = "ğŸ“Œ Pronta pra evoluir hoje, MiriÃ£ ğŸ’›"; }, 4500);
  }

  // Tabs
  function setupTabs(){
    const tabs = document.querySelectorAll(".tab");
    tabs.forEach(t=>{
      t.addEventListener("click", ()=>{
        tabs.forEach(x=>x.classList.remove("active"));
        t.classList.add("active");
        const key = t.dataset.tab;
        ["seg","ter","qui","sex"].forEach(k=>{
          document.getElementById("tab-"+k).style.display = (k===key) ? "block" : "none";
        });
      });
    });
  }

  function renderAll(){
    // default dates
    document.getElementById("exDate").value = todayISO();
    document.getElementById("mDate").value = todayISO();

    // render lists
    renderWorkout("seg","list-seg");
    renderWorkout("ter","list-ter");
    renderWorkout("qui","list-qui");
    renderWorkout("sex","list-sex");

    fillExerciseSelects();
    clearForm();
    renderHistory();
    renderMeasures();

    // charts
    document.getElementById("measureChartSelect").addEventListener("change", renderMeasuresChart);
    renderExerciseChart();
    renderMeasuresChart();
    setupTabs();
  }

  // init
  renderAll();
</script>
</body>
</html>
